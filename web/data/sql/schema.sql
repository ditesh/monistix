CREATE TABLE company (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, enabled TINYINT(1) DEFAULT '1' NOT NULL, notes TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE organization (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, enabled TINYINT(1) DEFAULT '1' NOT NULL, notes TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE plugin (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, enabled TINYINT(1) DEFAULT '1' NOT NULL, notes TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE project (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, organization_id BIGINT NOT NULL, enabled TINYINT(1) DEFAULT '1' NOT NULL, notes TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX organization_id_idx (organization_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE server (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, hostname VARCHAR(255) NOT NULL, group_id BIGINT NOT NULL, enabled TINYINT(1) DEFAULT '1' NOT NULL, notes TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX group_id_idx (group_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE server_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, project_id BIGINT NOT NULL, enabled TINYINT(1) DEFAULT '1' NOT NULL, notes TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX project_id_idx (project_id), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE project ADD CONSTRAINT project_organization_id_organization_id FOREIGN KEY (organization_id) REFERENCES organization(id) ON DELETE CASCADE;
ALTER TABLE server ADD CONSTRAINT server_group_id_server_group_id FOREIGN KEY (group_id) REFERENCES server_group(id) ON DELETE CASCADE;
ALTER TABLE server_group ADD CONSTRAINT server_group_project_id_project_id FOREIGN KEY (project_id) REFERENCES project(id) ON DELETE CASCADE;
